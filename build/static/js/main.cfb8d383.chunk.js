(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(14),c=t.n(r),o=t(3),a=t(2),u=t(4),i=t.n(u),s="/api/persons",d={getAll:function(){return i.a.get(s).then((function(e){return e.data}))},create:function(e){return i.a.post(s,e).then((function(e){return e.data}))},remove:function(e){return i.a.delete("".concat(s,"/").concat(e))},update:function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))}},l=t(0),f=function(e){var n=e.message,t=e.isError;if(null===n)return null;var r=t?"error":"notification";return Object(l.jsx)("div",{className:r,children:n})},j=function(e){var n=e.filterText,t=e.handleFilterChange;return Object(l.jsxs)("div",{children:["filter shown with: ",Object(l.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.onSubmit,t=e.newName,r=e.newNumber,c=e.handleNameChange,o=e.handleNumberChange;return Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:t,onChange:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:r,onChange:o})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.person,t=e.deletePerson;return Object(l.jsxs)("div",{children:[n.name," ",n.number," ",Object(l.jsx)("button",{onClick:t,children:"delete"})]})},m=function(e){var n=e.persons,t=e.deletePerson;return Object(l.jsx)("div",{children:n.map((function(e){return Object(l.jsx)(h,{person:e,deletePerson:function(){return t(e)}},e.id)}))})},O=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),u=Object(o.a)(c,2),i=u[0],s=u[1],h=Object(a.useState)(""),O=Object(o.a)(h,2),p=O[0],v=O[1],x=Object(a.useState)(""),g=Object(o.a)(x,2),w=g[0],C=g[1],N=Object(a.useState)(null),S=Object(o.a)(N,2),k=S[0],E=S[1],P=Object(a.useState)(null),T=Object(o.a)(P,2),y=T[0],A=T[1];Object(a.useEffect)((function(){d.getAll().then((function(e){return r(e)}))}),[]);var D=function(e,n){d.update(e.id,{name:e.name,number:n}).then((function(n){r(t.map((function(t){return t.id!==e.id?t:n}))),E("Updated number of ".concat(n.name)),setTimeout((function(){return E(null)}),3e3),I()})).catch((function(n){n.response&&400===n.response.status?F(n.response.data.error):(F("Information of ".concat(e.name,"' was already removed from server")),r(t.filter((function(n){return n.id!==e.id}))))}))},F=function(e){A(e),setTimeout((function(){return A(null)}),3e3)},I=function(){s(""),v("")},J=t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(f,{message:k,isError:!1}),Object(l.jsx)(f,{message:y,isError:!0}),Object(l.jsx)(j,{filterText:w,handleFilterChange:function(e){C(e.target.value)}}),Object(l.jsx)("h3",{children:"Add a new"}),Object(l.jsx)(b,{onSubmit:function(e){if(e.preventDefault(),-1!==t.map((function(e){return e.name})).indexOf(i))window.confirm("".concat(i," is already added to phonebook, replace the old number with the new one?"))&&D(t.find((function(e){return e.name===i})),p);else{var n={name:i,number:p};d.create(n).then((function(e){r(t.concat(e)),I(),E("Added ".concat(n.name)),setTimeout((function(){return E(null)}),3e3)})).catch((function(e){F(e.response.data.error)}))}},newName:i,newNumber:p,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){v(e.target.value)}}),Object(l.jsx)("h3",{children:"Numbers"}),Object(l.jsx)(m,{persons:J,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(d.remove(e.id),r(t.filter((function(n){return n.id!==e.id}))))}})]})};t(38);c.a.render(Object(l.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.cfb8d383.chunk.js.map